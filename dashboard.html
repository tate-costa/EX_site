<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Gymnastics Dashboard</title>
  <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-auth.js"></script>
  <style>
    body { font-family: Arial; padding: 20px; }
    .event-panel { margin-bottom: 30px; border: 1px solid #ccc; padding: 15px; }
    .submitBtn { margin-top: 10px; }
    .submitStatus { font-style: italic; color: green; margin-top: 5px; }
  </style>
</head>
<body>
  <h1>Welcome to Your Gymnastics Dashboard</h1>
  <div id="dashboard"></div>

  <script>
    // 🔥 Firebase config
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
      projectId: "YOUR_PROJECT_ID"
    };
    firebase.initializeApp(firebaseConfig);

    // 🔐 Capture user info
    firebase.auth().onAuthStateChanged(user => {
      if (user) {
        window.currentUser = {
          uid: user.uid,
          email: user.email
        };
        buildDashboard();
      } else {
        window.location.href = "login.html";
      }
    });

    // 🧱 Event list
    const events = ["Vault", "Bars", "Beam", "Floor"];

    // 📤 Backend URL
    const scriptURL = "https://script.google.com/macros/s/AKfycbxsVJbFDp15cuOjO20qC30IQ5OPnLhAn02t7yMzusZixDJuZEJy2J_yK_AmoVTIQanA/exec";

    function buildDashboard() {
      const container = document.getElementById("dashboard");

      events.forEach(event => {
        const panel = document.createElement("div");
        panel.className = "event-panel";

        const title = document.createElement("h2");
        title.textContent = event;
        panel.appendChild(title);

        const table = document.createElement("table");
        table.innerHTML = `
          <thead>
            <tr><th>Skill</th><th>Score</th></tr>
          </thead>
          <tbody>
            <tr>
              <td><input type="text" placeholder="Skill name"></td>
              <td><input type="number" placeholder="Score" step="0.1" min="0" max="10"></td>
            </tr>
            <tr>
              <td><input type="text" placeholder="Skill name"></td>
              <td><input type="number" placeholder="Score" step="0.1" min="0" max="10"></td>
            </tr>
          </tbody>
        `;
        panel.appendChild(table);

        const submitBtn = document.createElement("button");
        submitBtn.className = "submitBtn";
        submitBtn.textContent = "Submit Scores";

        const statusMsg = document.createElement("p");
        statusMsg.className = "submitStatus";

        submitBtn.addEventListener("click", () => {
          const rows = panel.querySelectorAll("tbody tr");
          const skills = [];

          rows.forEach(row => {
            const name = row.querySelector("input[type='text']").
