<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Gymnastics Dashboard</title>
  <script src="https://www.gstatic.com/firebasejs/10.3.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.3.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.3.1/firebase-firestore-compat.js"></script>
  <style>
    body { font-family: Arial; padding: 20px; background-color: #f4f4f4; }
    .submitBtn, #downloadBtn, #loginBtn, #seeBreakdownBtn {
      margin-top: 10px; padding: 8px 16px;
      background-color: #0077cc; color: white;
      border: none; border-radius: 4px; cursor: pointer;
    }
    .submitStatus { font-style: italic; color: green; margin-top: 5px; }
    table { width: 100%; border-collapse: collapse; margin-top: 10px; }
    th, td { border: 1px solid #ddd; padding: 8px; text-align: center; }
    input[type="text"], input[type="number"] { width: 90%; padding: 4px; }
  </style>
</head>
<body>
  <h1>Welcome to Your Gymnastics Dashboard</h1>

  <button id="loginBtn">Sign in with Google</button>
  <p id="userStatus"></p>

  <label for="eventSelect">Select Event:</label>
  <select id="eventSelect">
    <option value="">--Choose an event--</option>
    <option value="FX">FX</option>
    <option value="PH">PH</option>
    <option value="SR">SR</option>
    <option value="VT">VT</option>
    <option value="PB">PB</option>
    <option value="HB">HB</option>
  </select>

  <div id="eventForm"></div>

  <h2>ðŸ“Š Data Breakdown</h2>
  <div id="dataBreakdown">
    <table>
      <thead>
        <tr><th>Timestamp</th><th>Event</th><th>Skill</th><th>Value</th><th>Deduction</th></tr>
      </thead>
      <tbody></tbody>
    </table>
    <button id="downloadBtn">Download Data</button>
    <button id="seeBreakdownBtn">See Breakdown</button>
  </div>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyD3cJtk0c42pNAr3tsi_gQ7_9KcQS-HvgA",
      authDomain: "extracker-d2148.firebaseapp.com",
      projectId: "extracker-d2148",
      appId: "1:123456789012:web:abcdef123456"
    };

    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();

    let currentUserId = null;

    document.getElementById("loginBtn").addEventListener("click", () => {
      const provider = new firebase.auth.GoogleAuthProvider();
      auth.signInWithPopup(provider).then(result => {
        const user = result.user;
        currentUserId = user.uid;
        document.getElementById("userStatus").textContent = `Logged in as: ${user.displayName || user.email}`;
      });
    });

    const eventSelect = document.getElementById("eventSelect");
    const eventForm = document.getElementById("eventForm");
    const breakdownBody = document.querySelector("#dataBreakdown tbody");

    eventSelect.addEventListener("change", () => {
      const selectedEvent = eventSelect.value;
      eventForm.innerHTML = "";
      if (!selectedEvent) return;

      const table = document.createElement("table");
      table.innerHTML = `
        <thead><tr><th>Skill</th><th>Value
