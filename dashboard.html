<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Gymnastics Dashboard</title>
  <script>
    // ðŸ§± Event setup
    const events = [
      { name: "FX", skills: 8 },
      { name: "PH", skills: 8 },
      { name: "SR", skills: 8 },
      { name: "VT", skills: 3 },
      { name: "PB", skills: 8 },
      { name: "HB", skills: 8 }
    ];

    function buildDashboard() {
      const container = document.getElementById("dashboard");
      const breakdown = document.getElementById("dataBreakdown");

      events.forEach(event => {
        const panel = document.createElement("div");
        panel.className = "event-panel";

        const title = document.createElement("h2");
        title.textContent = `Event: ${event.name}`;
        panel.appendChild(title);

        const table = document.createElement("table");
        const rowsHTML = Array.from({ length: event.skills }).map(() => `
          <tr>
            <td><input type="text" placeholder="Skill name"></td>
            <td><input type="number" placeholder="Score" step="0.1" min="0" max="10"></td>
          </tr>
        `).join('');

        table.innerHTML = `
          <thead>
            <tr><th>Skill</th><th>Score</th></tr>
          </thead>
          <tbody>${rowsHTML}</tbody>
        `;
        panel.appendChild(table);

        const submitBtn = document.createElement("button");
        submitBtn.className = "submitBtn";
        submitBtn.textContent = "Submit Scores";

        const statusMsg = document.createElement("p");
        statusMsg.className = "submitStatus";

        submitBtn.addEventListener("click", () => {
          const rows = panel.querySelectorAll("tbody tr");
          const skills = [];

          rows.forEach(row => {
            const name = row.querySelector("input[type='text']").value.trim();
            const score = parseFloat(row.querySelector("input[type='number']").value);
            if (name && !isNaN(score)) {
              skills.push({ name, score });
            }
          });

          if (skills.length === 0) {
            statusMsg.textContent = "Please enter at least one skill and score.";
            return;
          }

          const timestamp = new Date().toLocaleString();
          const row = document.createElement("tr");
          row.innerHTML = `<td>${event.name}</td><td>${JSON.stringify(skills)}</td><td>${timestamp}</td>`;
          breakdown.querySelector("tbody").appendChild(row);

          statusMsg.textContent = `âœ… Submitted on ${timestamp}`;
        });

        panel.appendChild(submitBtn);
        panel.appendChild(statusMsg);
        container.appendChild(panel);
      });
    }

    function downloadData() {
      const rows = Array.from(document.querySelectorAll("#dataBreakdown tbody tr"));
      const csv = rows.map(row => Array.from(row.children).map(cell => `"${cell.textContent}"`).join(",")).join("
");
      const blob = new Blob([csv], { type: "text/csv" });
      const link = document.createElement("a");
      link.href = URL.createObjectURL(blob);
      link.download = "gymnastics_data.csv";
      link.click();
    }

    window.onload = buildDashboard;
  </script>

  <style>
    body { font-family: Arial; padding: 20px; background-color: #f9f9f9; }
    .event-panel { margin-bottom: 30px; border: 1px solid #ccc; padding: 15px; border-radius: 6px; background: #fff; }
    .submitBtn { margin-top: 10px; padding: 8px 16px; background-color: #0077cc; color: white; border: none; border-radius: 4px; cursor: pointer; }
    .submitStatus { font-style: italic; color: green; margin-top: 5px; }
    table { width: 100%; border-collapse: collapse; margin-top: 10px; }
    th, td { border: 1px solid #ddd; padding: 8px; text-align: center; }
    input[type="text"], input[type="number"] { width: 90%; padding: 4px; }
    #downloadBtn { margin-top: 20px; padding: 8px 16px; background-color: #28a745; color: white; border: none; border-radius: 4px; cursor: pointer; }
  </style>
</head>
<body>
  <h1>Welcome to Your Gymnastics Dashboard</h1>
  <div id="dashboard"></div>

  <h2>Data Breakdown</h2>
  <table id="dataBreakdown">
    <thead>
      <tr><th>Event</th><th>Skills</th><th>Timestamp</th></tr>
    </thead>
    <tbody></tbody>
  </table>
  <button id="downloadBtn" onclick="downloadData()">Download Data</button>
</body>
</html>
