<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Admin Panel</title>
  <script src="https://www.gstatic.com/firebasejs/10.3.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.3.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.3.1/firebase-firestore.js"></script>
</head>
<body>
  <h2>Admin Review Panel</h2>
  <div id="authSection">
    <input type="email" id="email" placeholder="Admin Email" />
    <input type="password" id="password" placeholder="Password" />
    <button id="loginBtn">Login</button>
  </div>

  <div id="reviewSection" style="display:none;">
    <h3>All Submissions</h3>
    <table id="reviewTable">
      <thead><tr><th>User</th><th>Event</th><th>Skill</th><th>Value</th><th>Deduction</th><th>Time</th></tr></thead>
      <tbody></tbody>
    </table>
  </div>

  <script>
    const firebaseConfig = { /* your config here */ };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();

    loginBtn.onclick = async () => {
      try {
        await auth.signInWithEmailAndPassword(email.value, password.value);
        authSection.style.display = "none";
        reviewSection.style.display = "block";
        loadSubmissions();
      } catch (err) {
        alert("Admin login failed: " + err.message);
      }
    };

    function loadSubmissions() {
      db.collection("submissions").orderBy("timestamp", "desc").onSnapshot(snapshot => {
        const tbody = reviewTable.querySelector("tbody");
        tbody.innerHTML = "";
        snapshot.forEach(doc => {
          const d = doc.data();
          const row = document.createElement("tr");
          row.innerHTML = `
            <td>${d.userId}</td>
            <td>${d.event}</td>
            <td>${d.skill}</td>
            <td>${d.value}</td>
            <td>${d.deduction}</td>
            <td>${new Date(d.timestamp).toLocaleString()}</td>
          `;
          tbody.appendChild(row);
        });
      });
    }
  </script>
</body>
</html>
